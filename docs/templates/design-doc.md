# 设计文档模板

<!-- 可替换许可证：本模板默认使用 MIT License，如需其他许可证请修改 LICENSE 文件 -->

# [系统名称] 设计文档

## 元信息

- **作者**：[姓名]
- **日期**：[YYYY-MM-DD]
- **状态**：[草稿 | 审查中 | 已批准 | 已实现]
- **版本**：[v0.1]

## 目标

[描述系统要解决什么问题，为什么需要这个系统]

### 核心目标

1. [目标 1]
2. [目标 2]
3. [目标 3]

### 非目标

明确以下内容**不是**本系统的目标：

1. [非目标 1]
2. [非目标 2]
3. [非目标 3]

## 接口定义

### 公开接口

```[语言]
// 列出所有公开接口
// 包含输入、输出、副作用
```

### 接口语义

- **[接口名称]**：[详细描述语义，包括前置条件、后置条件]
- **[接口名称]**：[详细描述语义，包括前置条件、后置条件]

## 关键不变量

### 不变量清单

1. **[不变量名称]**
   - **描述**：[什么必须始终成立]
   - **类型**：[安全性 | 活性 | 单调性]
   - **验证方法**：[如何测试这个不变量]

2. **[不变量名称]**
   - **描述**：[什么必须始终成立]
   - **类型**：[安全性 | 活性 | 单调性]
   - **验证方法**：[如何测试这个不变量]

### 不变量之间的关系

[描述不变量之间的依赖关系或冲突]

## 失败模型

### 失败场景清单

1. **[失败场景]**
   - **描述**：[什么会出错]
   - **影响**：[对系统的影响]
   - **应对策略**：[如何处理这个失败]
   - **测试方法**：[如何模拟这个失败]

2. **[失败场景]**
   - **描述**：[什么会出错]
   - **影响**：[对系统的影响]
   - **应对策略**：[如何处理这个失败]
   - **测试方法**：[如何模拟这个失败]

### 失败边界

[描述系统能容忍的失败范围，例如：f < n/2 个节点故障]

## 设计取舍

### 取舍 1: [决策名称]

- **选项 A**：[描述]
  - 优点：[列出优点]
  - 缺点：[列出缺点]

- **选项 B**：[描述]
  - 优点：[列出优点]
  - 缺点：[列出缺点]

- **最终选择**：[选项 A/B]
- **理由**：[为什么选择这个选项]

### 取舍 2: [决策名称]

[同上]

## 架构设计

### 组件图

```
[ASCII 图或链接到图片]
```

### 组件职责

- **[组件名称]**
  - **职责**：[做什么]
  - **接口**：[提供什么接口]
  - **依赖**：[依赖哪些组件]

- **[组件名称]**
  - **职责**：[做什么]
  - **接口**：[提供什么接口]
  - **依赖**：[依赖哪些组件]

### 数据流

[描述数据如何在组件间流动，可以包含序列图]

### 状态机

[如果系统有状态转换，描述状态机]

## 验证计划

### 单元测试

- **覆盖范围**：[测试哪些组件]
- **测试用例**：[列出关键测试用例]

### 集成测试

- **覆盖范围**：[测试哪些交互]
- **测试用例**：[列出关键测试用例]

### 属性测试

- **验证的不变量**：[列出要验证的不变量]
- **生成策略**：[如何生成随机输入]

### 故障注入

- **测试的失败场景**：[列出要测试的失败场景]
- **注入方法**：[如何模拟失败]

### 基准测试

- **性能指标**：[吞吐量、延迟、P99 延迟等]
- **基准场景**：[列出基准测试场景]
- **目标**：[期望的性能指标]

## 实施计划

### 阶段 1: [阶段名称]

- **目标**：[这个阶段要完成什么]
- **里程碑**：[可验证的里程碑]
- **验收标准**：[如何判断完成]

### 阶段 2: [阶段名称]

[同上]

### 阶段 3: [阶段名称]

[同上]

## 风险与应对

### 风险 1: [风险描述]

- **可能性**：[高 | 中 | 低]
- **影响**：[高 | 中 | 低]
- **应对策略**：[如何降低风险]

### 风险 2: [风险描述]

[同上]

## 参考资料

- [论文/书籍/博客标题](链接)
- [论文/书籍/博客标题](链接)

## 更新记录

- [YYYY-MM-DD] v0.1 - 初始版本
- [YYYY-MM-DD] v0.2 - [更新内容]
