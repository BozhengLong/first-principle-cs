# ROADMAP - 12 个月路线图

本文档规划未来 12 个月的开发路线，按季度拆解目标与验收标准。

## 总体策略

我们采用"深度优先"策略：每个季度专注于一个核心系统，从接口定义到完整实现，确保每个系统都达到"可验证、可诊断、可重构"的标准。

## Q1 (Month 1-3): 基础与语言执行

### 目标

构建最小的计算基础设施，理解"程序如何运行"。

### 里程碑

1. **Tiny Interpreter** - 最小解释器
   - 支持变量、函数、递归
   - 实现词法分析、语法分析、求值
   - 关键不变量：作用域规则、尾调用优化

2. **Simple Compiler** - 简单编译器
   - 编译到字节码或汇编
   - 实现寄存器分配、代码生成
   - 关键不变量：类型安全、内存安全

### 验收标准

- [ ] 能运行递归斐波那契
- [ ] 能通过 100+ 单元测试
- [ ] 能用属性测试验证作用域规则
- [ ] 有完整的设计文档与失败模型分析

### 依赖关系

无前置依赖，可以直接开始。

## Q2 (Month 4-6): 单机系统

### 目标

理解操作系统的核心抽象：进程、内存、文件。

### 里程碑

1. **Mini OS Kernel** - 最小操作系统内核
   - 实现进程调度、虚拟内存、系统调用
   - 关键不变量：进程隔离、内存保护

2. **Simple File System** - 简单文件系统
   - 实现 inode、目录、缓存
   - 关键不变量：崩溃一致性、原子性

### 验收标准

- [ ] 能运行多个并发进程
- [ ] 能通过故障注入测试（进程崩溃、磁盘损坏）
- [ ] 能用 fuzz 测试文件系统接口
- [ ] 有性能基准与回归测试

### 依赖关系

需要 Q1 的编译器来编译内核代码。

## Q3 (Month 7-9): 数据系统

### 目标

理解数据库的核心：存储、索引、事务。

### 里程碑

1. **Storage Engine** - 存储引擎
   - 实现 LSM-tree 或 B-tree
   - 关键不变量：持久化、有序性

2. **Transaction Manager** - 事务管理器
   - 实现 MVCC 或 2PL
   - 关键不变量：ACID 性质

### 验收标准

- [ ] 能处理 1M+ 条记录
- [ ] 能通过 Jepsen 风格的一致性测试
- [ ] 能用基准测试对比不同索引结构
- [ ] 有完整的故障恢复测试

### 依赖关系

需要 Q2 的文件系统来持久化数据。

## Q4 (Month 10-12): 网络与分布式

### 目标

理解分布式系统的核心：通信、一致性、容错。

### 里程碑

1. **Consensus Protocol** - 共识协议
   - 实现 Raft 或 Paxos
   - 关键不变量：安全性、活性

2. **Distributed KV Store** - 分布式键值存储
   - 实现分片、复制、故障转移
   - 关键不变量：线性一致性或最终一致性

### 验收标准

- [ ] 能容忍 f 个节点故障（f < n/2）
- [ ] 能通过网络分区测试
- [ ] 能用 Jepsen 验证一致性
- [ ] 有完整的性能与可用性分析

### 依赖关系

需要 Q3 的存储引擎来持久化状态。

## 后续方向 (Month 13+)

根据前 12 个月的经验，可能的扩展方向：

1. **AI 系统** - 实现简单的神经网络训练框架
2. **搜索系统** - 实现倒排索引与排序算法
3. **高级主题** - 形式化验证、性能优化、安全性分析

## 风险与应对

### 风险 1: 时间估算不准确

**应对**：每个季度结束时重新评估，必要时调整后续计划。

### 风险 2: 技术难度超预期

**应对**：降低系统复杂度，聚焦核心不变量，删除非必要特性。

### 风险 3: 文档滞后于代码

**应对**：设计文档先行，每个里程碑必须包含完整文档才算完成。

## 更新记录

- 2025-01: 初始版本

---

下一步：查看 [PROJECTS.md](./PROJECTS.md) 了解具体的系统仓库。
