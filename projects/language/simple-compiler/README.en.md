[中文](README.md) | [English](README.en.md)

---

# simple-compiler

A simple compiler that compiles a C-like language (SimpleLang) to stack-based bytecode.

## Project Description

simple-compiler is part of the [first-principles-cs](https://github.com/first-principles-cs) project, aiming to deeply understand compiler principles by building a compiler from scratch.

**Core Features**:
- Static type checking
- Compilation to stack-based bytecode
- Complete virtual machine execution environment
- Support for functions, recursion, loops, and other core features

## Quick Start

### Installation

```bash
pip install -r requirements.txt
```

### Compile and Run a Program

```bash
# Compile a SimpleLang program
python -m src.simple_compiler.main examples/factorial.sl

# Run the generated bytecode
python -m src.simple_compiler.vm examples/factorial.bc
```

### Run Tests

```bash
make test
```

## SimpleLang Language Example

```c
// Recursive factorial
int factorial(int n) {
    if (n <= 1) {
        return 1;
    } else {
        return n * factorial(n - 1);
    }
}

int main() {
    return factorial(5);  // returns 120
}
```

## Architecture Overview

The compiler consists of the following components:

1. **Lexer** — Converts source code into a token stream
2. **Parser** — Converts the token stream into an abstract syntax tree (AST)
3. **Type Checker** — Verifies type safety
4. **IR Generator** — Converts the AST into three-address code
5. **Code Generator** — Converts IR into bytecode
6. **VM (Virtual Machine)** — Executes the bytecode

## Documentation

- [Design Document](./docs/design.md)
- [Language Specification](./docs/language-spec.md)
- [Bytecode Specification](./docs/bytecode-spec.md)

## License

This project is licensed under the MIT License. See [LICENSE](./LICENSE).

## Related Course

This project corresponds to [Module B — Language & Execution](https://github.com/first-principles-cs/guide/blob/main/courses/module-b-language-execution.md).
